<div class="home-container">
  <div class="container">
    <!-- Page Header -->
    <header class="page-header" role="banner">
      <h1 class="page-title">Discover Amazing Movies</h1>
      <p class="page-subtitle">Explore our collection of films and find your next favorite movie</p>
    </header>

    <!-- Add Movie Button -->
    <section class="add-movie-section" *ngIf="canManage()" aria-label="Add new movie">
      <a class="add-movie-button" routerLink="/movie/add" aria-label="Add a new movie to the collection">
        <i class="fas fa-plus" aria-hidden="true"></i>
        <span>Add Movie</span>
      </a>
    </section>

    <!-- Search and Filter Section -->
    <section class="search-section" id="search-section" role="search" aria-label="Search movies">
      <h2 class="search-title">Find Your Perfect Movie</h2>
      
      <!-- Error Message -->
      <div *ngIf="errorMessage" class="error-message" role="alert" aria-live="assertive">
        <i class="fas fa-exclamation-circle" aria-hidden="true"></i>
        <span>{{ errorMessage }}</span>
      </div>

      <form class="search-form" role="search" aria-label="Movie search form" (ngSubmit)="getMovies(searchMovie.value, filters.value)">
        <div class="filter-group">
          <label for="filters" class="filter-label">Search by</label>
          <select 
            name="filters" 
            id="filters" 
            class="filter-select" 
            #filters
            [attr.aria-describedby]="'filter-description'"
          >
            <option value="title">Title</option>
            <option value="genre">Genre</option>
          </select>
          <div id="filter-description" class="sr-only">
            Choose whether to search by movie title or genre
          </div>
        </div>
        
        <div class="search-group">
          <label for="search_field" class="sr-only">Search movies</label>
          <input
            type="text"
            class="search-input"
            id="search_field"
            name="search"
            placeholder="Search for movies..."
            aria-label="Search movies by title or genre"
            [attr.aria-describedby]="'search-description'"
            #searchMovie
            [value]="searchTerm"
          />
          <i class="fas fa-search search-icon" aria-hidden="true"></i>
          <div id="search-description" class="sr-only">
            Type the movie title or genre you want to search for, then press Enter or click Search
          </div>
        </div>
        
        <div class="search-actions">
          <button
            type="submit"
            class="search-button"
            id="search_movie"
            [disabled]="isLoading"
            aria-label="Search for movies"
          >
            <i class="fas fa-search" aria-hidden="true"></i>
            <span>{{ isLoading ? 'Searching...' : 'Search' }}</span>
          </button>
          
          <button
            *ngIf="hasSearched"
            type="button"
            class="clear-button"
            (click)="clearSearch()"
            aria-label="Clear search and show all movies"
          >
            <i class="fas fa-times" aria-hidden="true"></i>
            <span>Clear</span>
          </button>
        </div>
      </form>
    </section>

    <!-- Loading State -->
    <section *ngIf="isLoading" class="loading-section" role="status" aria-live="polite">
      <div class="loading-spinner" aria-hidden="true"></div>
      <p class="loading-text">Loading movies...</p>
    </section>

    <!-- Search Results Info -->
    <section *ngIf="!isLoading && hasSearched" class="search-results-info" role="status" aria-live="polite">
      <p class="results-text">
        Found {{ movies.length }} movie{{ movies.length !== 1 ? 's' : '' }} for "{{ searchTerm }}" in {{ currentFilter }}
        <button 
          type="button" 
          class="show-all-link" 
          (click)="clearSearch()"
          aria-label="Show all movies"
        >
          Show all movies
        </button>
      </p>
    </section>

    <!-- Movies Grid -->
    <section 
      class="movies-grid" 
      id="movies-grid"
      *ngIf="!isLoading && movies.length > 0"
      role="region"
      aria-label="Movies collection"
      aria-live="polite"
    >
      <h2 class="sr-only">Movies in collection</h2>
      <app-movie
        *ngFor="let movie of movies; trackBy: trackByMovieId"
        [movie]="movie"
        (removedMovie)="removeFromMovies($event)"
        role="article"
        [attr.aria-label]="'Movie: ' + movie.title"
      ></app-movie>
    </section>

    <!-- Empty State -->
    <section 
      class="movies-empty" 
      *ngIf="!isLoading && movies.length === 0"
      role="region"
      aria-label="No movies found"
    >
      <i class="fas fa-film movies-empty-icon" aria-hidden="true"></i>
      <h3 class="movies-empty-title">
        {{ hasSearched ? 'No movies found' : 'No movies available' }}
      </h3>
      <p class="movies-empty-text">
        {{ hasSearched 
          ? 'Try adjusting your search criteria or browse our collection to discover new films.' 
          : 'No movies have been added to the collection yet.' 
        }}
      </p>
      <button 
        *ngIf="hasSearched"
        type="button" 
        class="show-all-button" 
        (click)="clearSearch()"
        aria-label="Show all movies"
      >
        <i class="fas fa-list" aria-hidden="true"></i>
        Show All Movies
      </button>
    </section>
  </div>
</div>
